<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Series LaTeX Template</title>
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/sidebar-nav.css">
    <link rel="stylesheet" href="assets/css/latex-templating.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        .variable-badge {
            cursor: pointer;
            margin-right: 5px;
            margin-bottom: 5px;
            display: inline-block;
        }

        .variable-badge:hover {
            opacity: 0.8;
        }
    </style>
</head>

<body data-logging-enabled="true">
    <div class="container-fluid px-0 app-shell">
        <div class="row flex-lg-nowrap g-0">
            <aside class="col-12 col-lg-3 col-xl-2 sidebar-column">
                <div class="sidebar-panel" id="pageSidebar" aria-label="Sidebar Navigation">
                    <div class="sidebar-brand">
                        <div class="brand-text">
                            <div class="title">Catalog Suite</div>
                            <div class="subtitle">AdminLTE-inspired</div>
                        </div>
                        <button class="btn btn-sm sidebar-collapse-btn" type="button" data-sidebar-collapse="true"
                            aria-label="Collapse sidebar">
                            <span class="btn-icon">&#9776;</span>
                        </button>
                    </div>
                    <div class="sidebar-heading">Navigation</div>
                    <nav class="sidebar-nav nav flex-column">
                        <a class="nav-link" href="spec-search.html">
                            <span class="sidebar-indicator"></span>
                            <span class="nav-label">Spec Search</span>
                        </a>
                        <a class="nav-link" href="catalog_ui.html">
                            <span class="sidebar-indicator"></span>
                            <span class="nav-label">Catalog UI</span>
                        </a>
                        <a class="nav-link" href="catalog-csv.html">
                            <span class="sidebar-indicator"></span>
                            <span class="nav-label">CSV Import/Export</span>
                        </a>
                        <a class="nav-link" href="global_latex_template.html">
                            <span class="sidebar-indicator"></span>
                            <span class="nav-label">Global LaTeX Template</span>
                        </a>
                    </nav>
                </div>
            </aside>
            <main class="col-12 col-lg-9 col-xl-10 content-column">
                <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3 mb-3">
                    <div>
                        <h1 class="h3 mb-1">Series LaTeX Template</h1>
                        <p class="text-muted mb-0">Generate PDF for a specific series.</p>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <button class="btn btn-outline-primary d-lg-none app-nav-toggle" type="button"
                            data-sidebar-toggle="true">
                            Open Navigation
                        </button>
                    </div>
                </div>

                <div id="statusAlert" class="alert-placeholder" aria-live="polite"></div>

                <!-- Series Details -->
                <section class="template-panel mb-4">
                    <h2 class="h5 mb-3">Series Details</h2>
                    <div class="row g-3" id="seriesDetailsContainer">
                        <div class="col-md-3">
                            <label class="fw-bold small text-muted">Name</label>
                            <div id="seriesName">Loading...</div>
                        </div>
                        <div class="col-md-3">
                            <label class="fw-bold small text-muted">Node ID</label>
                            <div id="seriesId">-</div>
                        </div>
                        <div class="col-md-3">
                            <label class="fw-bold small text-muted">Parent ID</label>
                            <div id="seriesParentId">-</div>
                        </div>
                        <div class="col-md-3">
                            <label class="fw-bold small text-muted">Type</label>
                            <div id="seriesType">series</div>
                        </div>
                    </div>
                </section>

                <!-- Series Metadata -->
                <section class="template-panel mb-4">
                    <h2 class="h5 mb-3">Series Metadata</h2>
                    <div class="border p-3 bg-white rounded" id="seriesMetadataContainer">
                        <span class="text-muted">Loading metadata...</span>
                    </div>
                </section>

                <!-- Series Custom Fields -->
                <section class="template-panel mb-4">
                    <h2 class="h5 mb-3">Series Custom Fields</h2>
                    <div class="border p-3 bg-white rounded" id="seriesCustomFieldsContainer">
                        <span class="text-muted">Loading custom fields...</span>
                    </div>
                </section>

                <!-- Load Template -->
                <section class="template-panel mb-4">
                    <h2 class="h5 mb-3">Load Template</h2>
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <select id="templateSelect" class="form-select">
                                <option value="">Select a template...</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <button type="button" id="loadTemplateBtn" class="btn btn-outline-primary w-100">Load
                                Template</button>
                        </div>
                    </div>
                </section>

                <!-- Latex Compile Section -->
                <div class="row g-4 mb-4">
                    <div class="col-12 col-lg-6">
                        <section class="template-panel h-100">
                            <h2 class="mb-3">Code Editor</h2>
                            <textarea id="latexSource" class="form-control" rows="20" spellcheck="false"
                                placeholder="Select a template to load code..."></textarea>
                            <div class="mt-3 d-flex flex-wrap gap-2">
                                <button type="button" id="compileBtn" class="btn btn-primary">Compile latex</button>
                                <button type="button" id="saveCompileBtn" class="btn btn-outline-secondary">Save
                                    Compile</button>
                                <button type="button" id="savePdfBtn" class="btn btn-outline-secondary">Save
                                    PDF</button>
                                <button type="button" id="downloadPdfBtn" class="btn btn-outline-secondary">PDF
                                    Download</button>
                            </div>
                        </section>
                    </div>
                    <div class="col-12 col-lg-6">
                        <section class="template-panel h-100">
                            <h2 class="mb-3">Compile Result</h2>
                            <div id="latex-preview-render" class="border p-3 bg-white" style="min-height: 400px;">
                                <p class="text-muted text-center mt-5">Preview will appear here.</p>
                            </div>
                        </section>
                    </div>
                </div>

            </main>
        </div>
        <div class="sidebar-backdrop" aria-hidden="true"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/sidebar-nav.js"></script>
    <script src="assets/js/app_loading.js"></script>
    <script src="assets/js/app_error.js"></script>
    <script src="assets/js/series-latex-templating.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>

</html>